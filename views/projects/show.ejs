<% page = "projects" %><% include ../partials/header %>

<div class="ui main text container">
  <h1 class="ui header">Jimmy's Projects</h1>
  
  
  <div class="ui fluid raised card">
    <div class="image">
      <img src="<%- project.image %>" />
    </div><!-- image -->
    <div class="content">
      <div class="header"><%- project.title %></div>
      <div class="meta">
        <p>
          <% if (project.current) { %>
            This project is <strong>Current</strong> and was started on <%= project.started.toDateString() %>
          <%
          } else { %>
            Project ran from <%= project.started.toDateString() + " to " + project.finished.toDateString() %>
          <% } %>
          by <strong><%= project.author.username %></strong>
        </p>
        
        <% if(currentUser && project.author.id.equals(currentUser._id)) { %>
          <a class="ui primary button" href="/projects/<%= project.shortId %>/edit">Edit Project</a>
          <form
            style="display: inline"
            class="ui form"
            action="/projects/<%= project.shortId %>?_method=DELETE"
            method="POST"
            onsubmit="return confirm('Do you really want to delete this project?')"
          >
            <button class="ui negative button">Delete Project</button>
          </form>
        <% } %>
        
      </div><!-- meta -->
      <div class="description">
        <%- project.content %>
      </div><!-- description -->
    </div><!-- content -->
    
    <%
    if (typeof project.repo !== "undefined" && typeof project.repo.url !== "undefined")
    {
    var color = (project.repo.location === "Github") ? 'green' : 'blue';
    %>
    <a class="ui bottom attached <%= color %> button" href="<%= project.repo.url %>" target="_blank">
      <%= (typeof project.repo.location !== "undefined") ? "View on " + project.repo.location : "View Repository Online" %>
    </a>
    <% } %>
    
  </div><!-- ui fluid card -->

</div><!-- ui main text container -->

<script>hljs.initHighlightingOnLoad();</script>

<% include ../partials/js/default %>
<% include ../partials/footer %>